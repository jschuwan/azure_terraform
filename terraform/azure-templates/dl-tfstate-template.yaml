parameters:
  # Parameter to determine if tfstate needs to be downloaded from previous build
- name: enabled
  type: boolean
  # Parameter for copying tfstate to correct location 
- name: directory
  type: string

steps:
- task: DownloadPipelineArtifact@2
  enabled: ${{ parameters.enabled }}
  inputs:
    buildType: 'specific'
    project: '$(System.TeamProject)'
    definition: '$(System.DefinitionId)'
    buildVersionToDownload: 'latest'
    artifactName: 'tf_state'
    targetPath: '${{ parameters.directory }}'
  displayName: Download previous tfstate 